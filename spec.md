# ğŸ± å°ç£å½©åˆ¸ BINGO BINGO è™Ÿç¢¼åˆ†æç³»çµ± â€” è¦æ ¼æ›¸

> **ç‰ˆæœ¬**: v1.0  
> **æ—¥æœŸ**: 2026-02-18  
> **ç‹€æ…‹**: Draft

---

## ç›®éŒ„

1. [ç³»çµ±æ¦‚è¿°](#1-ç³»çµ±æ¦‚è¿°)
2. [éŠæˆ²è¦å‰‡èˆ‡å››ç¨®ç©æ³•](#2-éŠæˆ²è¦å‰‡èˆ‡å››ç¨®ç©æ³•)
3. [ç³»çµ±æ¶æ§‹ (Architecture)](#3-ç³»çµ±æ¶æ§‹)
4. [ç³»çµ±æµç¨‹ (Data Flow)](#4-ç³»çµ±æµç¨‹)
5. [åŸºç¤è¨­æ–½ (Infrastructure)](#5-åŸºç¤è¨­æ–½)
6. [è³‡æ–™å±¤è¨­è¨ˆ (Database)](#6-è³‡æ–™å±¤è¨­è¨ˆ)
7. [çˆ¬èŸ²è¨­è¨ˆ (Crawler)](#7-çˆ¬èŸ²è¨­è¨ˆ)
8. [åˆ†æå¼•æ“ (Analysis Engine)](#8-åˆ†æå¼•æ“)
9. [å¾Œç«¯ API è¨­è¨ˆ](#9-å¾Œç«¯-api-è¨­è¨ˆ)
10. [å‰ç«¯è¨­è¨ˆ (Frontend)](#10-å‰ç«¯è¨­è¨ˆ)
11. [æ•ˆèƒ½èˆ‡æ“´å±•æ€§è¨­è¨ˆ](#11-æ•ˆèƒ½èˆ‡æ“´å±•æ€§è¨­è¨ˆ)
12. [éƒ¨ç½²æ¶æ§‹ (Deployment)](#12-éƒ¨ç½²æ¶æ§‹)
13. [é–‹ç™¼éšæ®µè¦åŠƒ](#13-é–‹ç™¼éšæ®µè¦åŠƒ)

---

## 1. ç³»çµ±æ¦‚è¿°

### 1.1 åšä»€éº¼ï¼Ÿ

ä¸€å€‹ **Web æ‡‰ç”¨ç¨‹å¼**ï¼Œè‡ªå‹•çˆ¬å–å°ç£å½©åˆ¸ BINGO BINGO çš„é–‹çè³‡æ–™ï¼Œåˆ†ææ­·å²è™Ÿç¢¼å‡ºç¾é »ç‡ï¼Œæä¾›ä½¿ç”¨è€…æŸ¥çœ‹ã€Œä¸‹ä¸€æœŸé«˜æ©Ÿç‡è™Ÿç¢¼ã€çš„åƒè€ƒã€‚

### 1.2 çµ¦èª°ç”¨ï¼Ÿ

- å…¬é–‹ç¶²ç«™ï¼Œ**ç„¡é ˆç™»å…¥**ï¼Œè¨ªå®¢å³å¯ä½¿ç”¨
- åŒæ™‚æ”¯æ´ **100 ä½ä½¿ç”¨è€…**
- ç›®æ¨™ä½¿ç”¨è€…ï¼šå½©åˆ¸ç©å®¶

### 1.3 æ ¸å¿ƒåƒ¹å€¼

```
å½©åˆ¸å®˜æ–¹ API â”€â”€â†’ è‡ªå‹•çˆ¬èŸ² â”€â”€â†’ è³‡æ–™åº« â”€â”€â†’ åˆ†æå¼•æ“ â”€â”€â†’ ç¶²é å‘ˆç¾é æ¸¬çµæœ
```

ä½¿ç”¨è€…ä¸éœ€è¦è‡ªå·±ç¿»æ­·å²è³‡æ–™çµ±è¨ˆï¼Œæ‰“é–‹ç¶²é å°±èƒ½çœ‹åˆ°ï¼š
- å“ª 10 å€‹è™Ÿç¢¼æœ€å¸¸å‡ºç¾
- å“ªå€‹è™Ÿç¢¼æœ€å¸¸ç•¶è¶…ç´šè™Ÿç¢¼
- ä¸‹ä¸€æœŸçŒœå¤§é‚„æ˜¯çŒœå°
- ä¸‹ä¸€æœŸçŒœå–®é‚„æ˜¯çŒœé›™

---

## 2. éŠæˆ²è¦å‰‡èˆ‡å››ç¨®ç©æ³•

### 2.1 BINGO BINGO åŸºæœ¬è¦å‰‡

- æ¯ **5 åˆ†é˜** é–‹çä¸€æ¬¡ï¼ˆæ¯å¤©ç´„ 288 æœŸï¼‰
- æ¯æœŸå¾ **01~80** éš¨æ©Ÿé–‹å‡º **20 å€‹è™Ÿç¢¼**
- è³‡æ–™ä¾†æº APIï¼š`GET /TLCAPIWeB/Lottery/BingoResult?openDate={date}&pageNum=1&pageSize=50`

### 2.2 å››ç¨®ç©æ³•å®šç¾©

| ç©æ³• | è¦å‰‡ | API æ¬„ä½ | åˆ†æç›®æ¨™ | é æ¸¬è¼¸å‡º |
|------|------|----------|----------|----------|
| **åŸºæœ¬ç©æ³•** | å¾ 01-80 é¸ 1~10 å€‹è™Ÿç¢¼ | `bigShowOrder` / `openShowOrder` | çµ±è¨ˆæ¯å€‹è™Ÿç¢¼å‡ºç¾é »ç‡ | Top 10 é«˜é »è™Ÿç¢¼ |
| **è¶…ç´šè™Ÿç¢¼** | é–‹å‡ºé †åºçš„ç¬¬ 20 å€‹è™Ÿç¢¼ | `bullEyeTop` | å“ªäº›è™Ÿç¢¼æœ€å¸¸ç•¶è¶…ç´šè™Ÿç¢¼ | Top 10 é«˜é »è¶…ç´šè™Ÿç¢¼ |
| **çŒœå¤§å°** | å¤§è™Ÿ(41-80) vs å°è™Ÿ(01-40) å“ªé‚Šå¤š | `highLowTop` | å¤§/å°/å¹³æ‰‹çš„æ­·å²åˆ†å¸ƒ | é æ¸¬ã€Œå¤§ã€æˆ–ã€Œå°ã€ |
| **çŒœå–®é›™** | å–®æ•¸ vs é›™æ•¸ å“ªé‚Šå¤š | `oddEvenTop` | å–®/é›™/å¹³æ‰‹çš„æ­·å²åˆ†å¸ƒ | é æ¸¬ã€Œå–®ã€æˆ–ã€Œé›™ã€ |

### 2.3 API Response é—œéµæ¬„ä½

```
drawTerm        æœŸè™Ÿ (e.g. "115009534")
bigShowOrder    20 å€‹è™Ÿç¢¼ï¼ˆæ•¸å€¼æ’åºï¼‰       â†’ ["11","19","22"...]
openShowOrder   20 å€‹è™Ÿç¢¼ï¼ˆé–‹å‡ºé †åºï¼‰       â†’ ["42","68","41"...]
bullEyeTop      è¶…ç´šè™Ÿç¢¼ = openShowOrder[19] â†’ "44"
highLowTop      å¤§å°çµæœ                    â†’ "å¤§" / "å°" / "ï¼"
oddEvenTop      å–®é›™çµæœ                    â†’ "å–®" / "é›™" / "ï¼"
```

> **è§€å¯Ÿ**ï¼š`bullEyeTop` æ°¸é ç­‰æ–¼ `openShowOrder` çš„æœ€å¾Œä¸€å€‹å…ƒç´ ã€‚  
> **è§€å¯Ÿ**ï¼š`"ï¼"` ä»£è¡¨å¹³æ‰‹ï¼ˆå¤§å°æˆ–å–®é›™å„é–‹ 10 å€‹ï¼‰ã€‚

---

## 3. ç³»çµ±æ¶æ§‹

### 3.1 æ¶æ§‹ç¸½è¦½

ç”¨ä¸€å¥è©±ç†è§£ï¼š**å‰å¾Œç«¯åˆ†é›¢ + æ’ç¨‹çˆ¬èŸ² + å¿«å–é è¨ˆç®—**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä½¿ç”¨è€… (Browser)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Vue 3 å‰ç«¯ (Vite)                        â”‚
â”‚   Dashboard â”‚ BasicAnalysis â”‚ SuperNumber â”‚ HighLowOddEven â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ REST API (JSON)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FastAPI å¾Œç«¯                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ API è·¯ç”± â”‚  â”‚ Analysis     â”‚  â”‚ Crawler           â”‚    â”‚
â”‚  â”‚ /api/*   â”‚  â”‚ Engine       â”‚  â”‚ (APScheduler é©…å‹•) â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚       â”‚               â”‚                   â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              SQLAlchemy ORM                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   SQLite / PostgreSQL    â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–²
                        â”‚ HTTP GET
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  å°ç£å½©åˆ¸å®˜æ–¹ API         â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆï¼Ÿï¼ˆçµ¦æ–°æ‰‹çš„è§£é‡‹ï¼‰

| è¨­è¨ˆæ±ºç­– | ç‚ºä»€éº¼ |
|---------|--------|
| **å‰å¾Œç«¯åˆ†é›¢** | å‰ç«¯åªè² è²¬ç•«é¢ï¼Œå¾Œç«¯åªè² è²¬è³‡æ–™ã€‚å…©é‚Šå¯ä»¥ç¨ç«‹é–‹ç™¼ã€ç¨ç«‹éƒ¨ç½²ã€‚å‰ç«¯å£äº†ä¸å½±éŸ¿çˆ¬èŸ²ï¼Œçˆ¬èŸ²å£äº†å‰ç«¯é‚„èƒ½é¡¯ç¤ºèˆŠè³‡æ–™ |
| **æ’ç¨‹çˆ¬èŸ²è€Œéå³æ™‚çˆ¬** | å¦‚æœ 100 å€‹ä½¿ç”¨è€…åŒæ™‚è«‹æ±‚ â†’ 100 æ¬¡æ‰“å®˜æ–¹ API â†’ è¢«å°é–ã€‚ç”¨æ’ç¨‹å…ˆçˆ¬å¥½å­˜é€² DBï¼Œä½¿ç”¨è€…è®€ DB å°±å¥½ |
| **SQLAlchemy ORM** | ä¸ç”¨æ‰‹å¯« SQLï¼ŒPython ç‰©ä»¶ç›´æ¥å°æ‡‰è³‡æ–™è¡¨ã€‚é–‹ç™¼ç”¨ SQLiteï¼ˆé›¶è¨­å®šï¼‰ï¼Œä¸Šç·šæ› PostgreSQLï¼ˆåªæ”¹é€£ç·šå­—ä¸²ï¼‰ |
| **Flat Design UI** | æ‰å¹³åŒ–è¨­è¨ˆï¼Œç°¡æ½”æ˜“è®€ï¼Œè¼‰å…¥å¿« |

### 3.3 æŠ€è¡“æ£§

```
å‰ç«¯:  Vue 3 + Vite + Chart.js + Pinia + Axios
å¾Œç«¯:  Python 3.11+ + FastAPI + SQLAlchemy 2.0 + Pydantic v2
è³‡æ–™åº«: SQLite (dev) â†’ PostgreSQL (prod)
æ’ç¨‹:  APScheduler
éƒ¨ç½²:  Docker Compose + Cloud (fly.io / Railway / è‡ªæ¶ VPS)
```

---

## 4. ç³»çµ±æµç¨‹

### 4.1 è³‡æ–™æµå…¨æ™¯

ç³»çµ±æœ‰å…©æ¢ä¸»è¦æµç¨‹â€”**å¯«å…¥æµç¨‹**ï¼ˆçˆ¬èŸ²ï¼‰å’Œ**è®€å–æµç¨‹**ï¼ˆä½¿ç”¨è€…ï¼‰ï¼š

```
ã€å¯«å…¥æµç¨‹ â€” æ¯ 6 åˆ†é˜è‡ªå‹•åŸ·è¡Œã€‘
  APScheduler è§¸ç™¼
      â”‚
      â–¼
  Crawler æ‰“å°å½© APIï¼ˆæŸ¥ä»Šå¤© + æ˜¨å¤©ï¼‰
      â”‚
      â–¼
  é©—è­‰è³‡æ–™å®Œæ•´æ€§ï¼ˆ20 å€‹è™Ÿç¢¼ã€ç¯„åœ 01-80ã€ç„¡é‡è¤‡ï¼‰
      â”‚
      â–¼
  è§£æ â†’ å­˜å…¥ draw_results è¡¨ï¼ˆé‡è¤‡æœŸè™Ÿè‡ªå‹•è·³éï¼‰
      â”‚
      â–¼
  è§¸ç™¼ Analysis Engine â†’ é è¨ˆç®—çµæœ â†’ å­˜å…¥ predictions è¡¨
      â”‚
      â–¼
  æ›´æ–° last_updated æ™‚é–“æˆ³ â†’ è¨˜éŒ„ crawler_logs

ã€è®€å–æµç¨‹ â€” å‰ç«¯è‡ªå‹•åµæ¸¬æ›´æ–°ã€‘
  ä½¿ç”¨è€…æ‰“é–‹ç¶²é 
      â”‚
      â–¼
  å‰ç«¯ç«‹å³å‘¼å« /api/predictions/all â†’ æ¸²æŸ“ç•«é¢
      â”‚
      â–¼
  å‰ç«¯é–‹å§‹ polling /api/status/last-updatedï¼ˆæ¯ 30 ç§’ä¸€æ¬¡ï¼‰
      â”‚
      â–¼
  åµæ¸¬åˆ° last_updated æ™‚é–“æˆ³æ”¹è®Š
      â”‚
      â–¼
  è‡ªå‹•å‘¼å« /api/predictions/all â†’ æ›´æ–°ç•«é¢
```

### 4.2 ç‚ºä»€éº¼çˆ¬èŸ²é–“éš” 6 åˆ†é˜ï¼Ÿ

- è³“ç‹—æ¯ 5 åˆ†é˜é–‹ä¸€æœŸï¼Œçˆ¬èŸ²æ¯ 6 åˆ†é˜è·‘ä¸€æ¬¡
- å¤šç•™ 1 åˆ†é˜çµ¦ API æ›´æ–°å»¶é²ï¼Œå¹¾ä¹æ¯æœŸé–‹å®Œå°±èƒ½æŠ“åˆ°
- å‰ç«¯ä¸æ˜¯å›ºå®šé–“éš”åˆ·æ–°ï¼Œè€Œæ˜¯ **åµæ¸¬åˆ°çˆ¬èŸ²å®Œæˆæ‰åˆ·æ–°**ï¼Œé¿å…ç„¡æ„ç¾©çš„è«‹æ±‚

### 4.3 å‰ç«¯ Polling æ©Ÿåˆ¶

```
å‰ç«¯æ¯ 30 ç§’ â†’ GET /api/status/last-updated â†’ å›å‚³ {"last_updated": "2026-02-18T14:36:00"}
                                                    â”‚
                             è·Ÿå‰ä¸€æ¬¡çš„ timestamp æ¯”è¼ƒ
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
              æ²’è®Š â†’ ä¸åšäº‹                    è®Šäº† â†’ fetchAll()
```

> **ç‚ºä»€éº¼ä¸ç›´æ¥æ¯ 30 ç§’ fetchAllï¼Ÿ**
> `/api/status/last-updated` åªå›å‚³ä¸€å€‹æ™‚é–“æˆ³ï¼ˆå¹¾ bytesï¼‰ï¼Œè¶…è¼•é‡ã€‚
> åªåœ¨çˆ¬èŸ²çœŸçš„è·‘å®Œã€æœ‰æ–°è³‡æ–™æ™‚æ‰æ‰“å®Œæ•´çš„ predictions APIã€‚

### 4.4 æ’ç¨‹æ™‚é–“ç·š

```
07:00  â”œâ”€â”€ ç¬¬ä¸€æœŸé–‹ç
07:05  â”œâ”€â”€ ç¬¬äºŒæœŸé–‹ç
07:06  â”œâ”€â”€ ğŸ¤– çˆ¬èŸ²åŸ·è¡Œï¼šæŠ“åˆ° 07:00~07:05 çš„æ–°è³‡æ–™ â†’ åˆ†æ â†’ æ›´æ–°é æ¸¬
       â”‚   â†’ å‰ç«¯åµæ¸¬åˆ° last_updated è®Šäº† â†’ è‡ªå‹•åˆ·æ–°ç•«é¢
07:10  â”œâ”€â”€ ç¬¬ä¸‰æœŸé–‹ç
07:12  â”œâ”€â”€ ğŸ¤– çˆ¬èŸ²åŸ·è¡Œï¼šæŠ“åˆ°æœ€æ–°è³‡æ–™ â†’ åˆ†æ â†’ æ›´æ–°é æ¸¬
       â”‚   â†’ å‰ç«¯è‡ªå‹•åˆ·æ–°
  ...
01:55  â””â”€â”€ æœ€å¾Œä¸€æœŸé–‹ç
```

---

## 5. åŸºç¤è¨­æ–½

### 5.1 é–‹ç™¼ç’°å¢ƒ

```
æœ¬åœ°é–‹ç™¼è€…çš„é›»è…¦
  â”œâ”€â”€ Python venv (å¾Œç«¯)
  â”œâ”€â”€ Node.js (å‰ç«¯ dev server)
  â”œâ”€â”€ SQLite æª”æ¡ˆ (./bingo.db) â† é›¶è¨­å®š
  â””â”€â”€ VS Code
```

**é–‹ç™¼æ™‚ä¸éœ€è¦ Docker**ã€‚ç›´æ¥è·‘å…©å€‹çµ‚ç«¯è¦–çª—ï¼š
- Terminal 1: `uvicorn app.main:app --reload` (å¾Œç«¯ port 8000)
- Terminal 2: `npm run dev` (å‰ç«¯ port 5173)

### 5.2 ç”Ÿç”¢ç’°å¢ƒ

```
Cloud Server (fly.io / Railway / VPS)
  â”‚
  â”œâ”€â”€ Docker Container: backend
  â”‚     â”œâ”€â”€ FastAPI + Uvicornï¼ˆé… Gunicorn å¤š workerï¼‰
  â”‚     â”œâ”€â”€ APScheduler (æ’ç¨‹çˆ¬èŸ²)
  â”‚     â””â”€â”€ é€£ PostgreSQL
  â”‚
  â”œâ”€â”€ Docker Container: frontend
  â”‚     â””â”€â”€ Nginx éœæ…‹æª”æ¡ˆæœå‹™
  â”‚
  â””â”€â”€ Docker Container: postgres
        â””â”€â”€ PostgreSQL è³‡æ–™åº« + Volume æŒä¹…åŒ–
```

### 5.3 ç’°å¢ƒè®Šæ•¸ (.env)

```env
# è³‡æ–™åº«
DATABASE_URL=sqlite:///./bingo.db          # é–‹ç™¼
# DATABASE_URL=postgresql://user:pass@db:5432/bingo  # ç”Ÿç”¢

# æ’ç¨‹
CRAWLER_INTERVAL_MINUTES=6

# æ‡‰ç”¨
ENV=development
API_BASE_URL=http://localhost:8000

# å‰ç«¯ (Vite)
VITE_API_BASE_URL=http://localhost:8000
```

---

## 6. è³‡æ–™å±¤è¨­è¨ˆ

### 6.1 è¨­è¨ˆåŸå‰‡

1. **draw_term è¨­ UNIQUE**ï¼šåŒä¸€æœŸä¸æœƒå­˜å…©æ¬¡
2. **è™Ÿç¢¼ç”¨é€—è™Ÿåˆ†éš” TEXT**ï¼šç°¡å–®ä¸”å¤ ç”¨ï¼ˆä¸éœ€è¦ JOIN è™Ÿç¢¼å­è¡¨ï¼‰
3. **é å…ˆè¨ˆç®—å¤§å°/å–®é›™è¨ˆæ•¸**ï¼šPython å¯«å…¥æ™‚ç®—å¥½ï¼Œè®€å–æ™‚ä¸ç”¨å†ç®—
4. **draw_datetime å»ºç´¢å¼•**ï¼šåŠ é€Ÿã€Œæœ€è¿‘ N æœŸã€çš„æŸ¥è©¢

### 6.2 è³‡æ–™è¡¨è¨­è¨ˆ

#### Table: `draw_results`ï¼ˆæ ¸å¿ƒè¡¨ â€” å­˜æ¯ä¸€æœŸé–‹ççµæœï¼‰

| æ¬„ä½ | é¡å‹ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|------|
| `id` | INTEGER PK | è‡ªå¢ä¸»éµ | 1 |
| `draw_term` | VARCHAR(20) UNIQUE | æœŸè™Ÿ | "115009534" |
| `draw_date` | DATE | é–‹çæ—¥æœŸ | 2026-02-16 |
| `draw_datetime` | DATETIME | é–‹çæ—¥æœŸæ™‚é–“ | 2026-02-16 14:30:00 |
| `numbers_sorted` | TEXT | æ’åºå¾Œçš„ 20 å€‹è™Ÿç¢¼ (é€—è™Ÿåˆ†éš”) | "11,19,22,24,..." |
| `numbers_sequence` | TEXT | é–‹å‡ºé †åºçš„ 20 å€‹è™Ÿç¢¼ | "42,68,41,34,..." |
| `super_number` | VARCHAR(2) | è¶…ç´šè™Ÿç¢¼ | "44" |
| `high_low_result` | VARCHAR(2) | å¤§/å°/ï¼ | "å¤§" |
| `high_count` | INTEGER | å¤§è™Ÿæ•¸é‡ (41-80) | 12 |
| `low_count` | INTEGER | å°è™Ÿæ•¸é‡ (01-40) | 8 |
| `odd_even_result` | VARCHAR(2) | å–®/é›™/ï¼ | "å–®" |
| `odd_count` | INTEGER | å–®æ•¸æ•¸é‡ | 11 |
| `even_count` | INTEGER | é›™æ•¸æ•¸é‡ | 9 |
| `created_at` | DATETIME | å¯«å…¥æ™‚é–“ | auto |

**ç´¢å¼•**ï¼š
- `idx_draw_term` on `draw_term` â†’ æŸ¥ç‰¹å®šæœŸè™Ÿ
- `idx_draw_datetime` on `draw_datetime DESC` â†’ æŸ¥æœ€è¿‘ N æœŸ

> **ç‚ºä»€éº¼ä¸æŠŠ 80 å€‹è™Ÿç¢¼å„ä¸€æ¬„ï¼Ÿ**  
> å› ç‚ºæˆ‘å€‘çš„æŸ¥è©¢æ¨¡å¼æ˜¯ã€Œå–æœ€è¿‘ N æœŸçš„æ‰€æœ‰è™Ÿç¢¼ã€ï¼Œä¸æ˜¯ã€ŒæŸ¥æŸå€‹è™Ÿç¢¼å‡ºç¾åœ¨å“ªäº›æœŸã€ã€‚é€—è™Ÿåˆ†éš” TEXT åœ¨ Python è£¡ `split(",")` å°±èƒ½ç”¨ï¼Œç°¡å–®åˆé«˜æ•ˆã€‚

#### Table: `predictions`ï¼ˆå¿«å–åˆ†æçµæœï¼‰

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|------|------|------|
| `id` | INTEGER PK | è‡ªå¢ä¸»éµ |
| `prediction_type` | VARCHAR(20) | basic / super / high_low / odd_even |
| `period_range` | INTEGER | åˆ†ææœŸæ•¸ (10, 20, 30, 50, 100) |
| `predicted_numbers` | TEXT (JSON) | é æ¸¬è™Ÿç¢¼ `["42","17","08"]` |
| `predicted_result` | VARCHAR(10) | å¤§/å°/å–®/é›™ï¼ˆçŒœå¤§å°/çŒœå–®é›™å°ˆç”¨ï¼‰ |
| `result_probability` | FLOAT | é æ¸¬ä¿¡å¿ƒåº¦ |
| `confidence_scores` | TEXT (JSON) | å„è™Ÿç¢¼ä¿¡å¿ƒåˆ†æ•¸ |
| `based_on_latest_term` | VARCHAR(20) | åŸºæ–¼å“ªä¸€æœŸçš„è³‡æ–™ |
| `created_at` | DATETIME | ç”¢ç”Ÿæ™‚é–“ |

> **ç”¨é€”**ï¼šçˆ¬èŸ²æŠ“å®Œæ–°è³‡æ–™å¾Œï¼Œè‡ªå‹•è·‘åˆ†æï¼Œçµæœå­˜åˆ°é€™å¼µè¡¨ã€‚ä½¿ç”¨è€…è®€é€™å¼µè¡¨å°±å¥½ï¼Œä¸ç”¨å³æ™‚è¨ˆç®—ã€‚

#### Table: `crawler_logs`ï¼ˆçˆ¬èŸ²åŸ·è¡Œç´€éŒ„ï¼‰

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|------|------|------|
| `id` | INTEGER PK | è‡ªå¢ä¸»éµ |
| `started_at` | DATETIME | é–‹å§‹æ™‚é–“ |
| `finished_at` | DATETIME | çµæŸæ™‚é–“ |
| `status` | VARCHAR(20) | success / partial / failed |
| `records_fetched` | INTEGER | API å›å‚³ç­†æ•¸ |
| `records_inserted` | INTEGER | æ–°å¢ç­†æ•¸ |
| `records_skipped` | INTEGER | é‡è¤‡è·³éç­†æ•¸ |
| `error_message` | TEXT | éŒ¯èª¤è¨Šæ¯ï¼ˆå¦‚æœæœ‰ï¼‰ |

> **ç”¨é€”**ï¼šdebug ç”¨ã€‚å¦‚æœç™¼ç¾è³‡æ–™æ²’æ›´æ–°ï¼Œå¯ä»¥æŸ¥é€™å¼µè¡¨çœ‹çˆ¬èŸ²æ˜¯æˆåŠŸé‚„æ˜¯å¤±æ•—ã€‚

### 6.3 ERDï¼ˆå¯¦é«”é—œä¿‚åœ–ï¼‰

```
draw_results (æ ¸å¿ƒ)
    â”‚
    â”‚ predictions.based_on_latest_term â†’ draw_results.draw_term
    â–¼
predictions (å¿«å–)

crawler_logs (ç¨ç«‹ï¼Œåƒ…ä¾› debug)
```

ä¸‰å¼µè¡¨ç›¸å°ç¨ç«‹ï¼Œæ²’æœ‰è¤‡é›œçš„ foreign key é—œä¿‚ã€‚é€™æ˜¯åˆ»æ„çš„â€”â€”ä¿æŒç°¡å–®ã€‚

---

## 7. çˆ¬èŸ²è¨­è¨ˆ

### 7.1 çˆ¬èŸ²æµç¨‹åœ–

```
APSchedulerï¼ˆæ¯ 6 åˆ†é˜è§¸ç™¼ï¼‰
    â”‚
    â–¼
â”Œâ”€ BingoCrawler.run() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                            â”‚
â”‚  1ï¸âƒ£ fetch_latest_draws()                                   â”‚
â”‚     â”œâ”€â”€ GET ä»Šå¤©çš„è³‡æ–™ (openDate=today, pageSize=50)        â”‚
â”‚     â””â”€â”€ GET æ˜¨å¤©çš„è³‡æ–™ (openDate=yesterday, pageSize=50)    â”‚
â”‚                                                            â”‚
â”‚  2ï¸âƒ£ é€ç­†è™•ç†æ¯ä¸€æœŸé–‹çè³‡æ–™:                                  â”‚
â”‚     â”œâ”€â”€ _validate(data)     é©—è­‰è³‡æ–™å®Œæ•´æ€§                    â”‚
â”‚     â”‚     â”œâ”€â”€ å¿…è¦æ¬„ä½å­˜åœ¨ï¼Ÿ                                  â”‚
â”‚     â”‚     â”œâ”€â”€ openShowOrder æœ‰ 20 å€‹è™Ÿç¢¼ï¼Ÿ                   â”‚
â”‚     â”‚     â”œâ”€â”€ bullEyeTop == openShowOrder[19]ï¼Ÿ             â”‚
â”‚     â”‚     â”œâ”€â”€ æ‰€æœ‰è™Ÿç¢¼åœ¨ 01-80ï¼Ÿ                             â”‚
â”‚     â”‚     â””â”€â”€ 20 å€‹è™Ÿç¢¼ä¸é‡è¤‡ï¼Ÿ                               â”‚
â”‚     â”‚                                                       â”‚
â”‚     â”œâ”€â”€ _parse_draw_data(data)   è½‰æ›ç‚º DB æ ¼å¼             â”‚
â”‚     â”‚     â”œâ”€â”€ è¨ˆç®— high_count / low_count                   â”‚
â”‚     â”‚     â””â”€â”€ è¨ˆç®— odd_count / even_count                   â”‚
â”‚     â”‚                                                       â”‚
â”‚     â””â”€â”€ parse_and_save(data)    å­˜å…¥ DB                     â”‚
â”‚           â”œâ”€â”€ æœŸè™Ÿå·²å­˜åœ¨ â†’ skip                              â”‚
â”‚           â””â”€â”€ æ–°æœŸè™Ÿ â†’ insert                               â”‚
â”‚                                                            â”‚
â”‚  3ï¸âƒ£ è§¸ç™¼åˆ†æå¼•æ“ï¼ˆé è¨ˆç®—çµæœï¼‰                                â”‚
â”‚                                                            â”‚
â”‚  4ï¸âƒ£ log_execution()  è¨˜éŒ„åˆ° crawler_logs                   â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 é—œéµè¨­è¨ˆæ±ºç­–

| æ±ºç­– | åŸå›  |
|------|------|
| åŒæ™‚æŸ¥ä»Šå¤© + æ˜¨å¤© | é¿å…è·¨æ—¥ï¼ˆåŠå¤œ 00:00ï¼‰éºæ¼è³‡æ–™ |
| pageSize=50 | 6 åˆ†é˜ Ã· 5 åˆ†é˜ â‰ˆ 1 æœŸï¼Œ50 ç­†ç¶½ç¶½æœ‰é¤˜ã€‚å¤šæŠ“ä¸€é»èƒ½è£œæ¼ |
| é©—è­‰å¾Œå†å­˜ | é¿å…é«’è³‡æ–™æ±™æŸ“åˆ†æçµæœ |
| UNIQUE draw_term | DB å±¤é¢ä¿è­‰ä¸é‡è¤‡ï¼Œå³ä½¿ç¨‹å¼é‚è¼¯æœ‰ bug ä¹Ÿä¸æœƒå­˜å…©æ¬¡ |
| max_instances=1 | APScheduler ç¢ºä¿åŒä¸€æ™‚é–“åªæœ‰ä¸€å€‹çˆ¬èŸ²åœ¨è·‘ï¼Œä¸æœƒä¸¦è¡Œæ’éµ |

### 7.3 éŒ¯èª¤è™•ç†ç­–ç•¥

```
ç¶²è·¯éŒ¯èª¤ (timeout / 5xx)
    â†’ è¨˜éŒ„ log â†’ ç­‰ä¸‹ä¸€è¼ªé‡è©¦ï¼ˆ6 åˆ†é˜å¾Œï¼‰
    â†’ ä¸ crashï¼Œä¸å½±éŸ¿æœå‹™

API å›å‚³é 0 çš„ rtCode
    â†’ è¨˜éŒ„ log â†’ ç•¥éæ­¤æ¬¡æŸ¥è©¢

å–®ç­†è³‡æ–™é©—è­‰å¤±æ•—
    â†’ è¨˜éŒ„ log â†’ è·³éé€™ç­†ï¼Œç¹¼çºŒè™•ç†å…¶ä»–ç­†

DB å¯«å…¥å¤±æ•— (IntegrityError)
    â†’ rollback â†’ è¨˜éŒ„ç‚º skipped

å…¨éƒ¨å¤±æ•—
    â†’ crawler_logs.status = "failed"
    â†’ error_message ç•™å­˜
```

### 7.4 drawTerm æœŸè™Ÿè§£æ

```
æœŸè™Ÿæ ¼å¼: 115009534 (9 ä½æ•¸)
  â”œâ”€â”€ 115      æ°‘åœ‹å¹´ â†’ 2026 (115 + 1911)
  â”œâ”€â”€ 009      ä¸€å¹´ä¸­çš„ç¬¬ 9 å¤© â†’ 1 æœˆ 9 æ—¥
  â””â”€â”€ 534      ç•¶å¤©ç¬¬ 534 æœŸ (ä¸ä¸€å®šå¾ 1 é–‹å§‹)

â†’ draw_date å¯ç²¾ç¢ºè¨ˆç®—
â†’ draw_time éœ€è§€å¯Ÿæ›´å¤šè³‡æ–™ç¢ºèªï¼ˆç›®å‰ç”¨ API å›å‚³çš„è³‡æ–™ç‚ºä¸»ï¼‰
```

---

## 8. åˆ†æå¼•æ“

### 8.1 æ¶æ§‹

```
AnalysisEngineï¼ˆçµ±ä¸€å…¥å£ï¼‰
    â”‚
    â”œâ”€â”€ BasicAnalyzer         01-80 è™Ÿç¢¼é »ç‡
    â”œâ”€â”€ SuperNumberAnalyzer   è¶…ç´šè™Ÿç¢¼çµ±è¨ˆ
    â”œâ”€â”€ HighLowAnalyzer       çŒœå¤§å°è¶¨å‹¢
    â””â”€â”€ OddEvenAnalyzer       çŒœå–®é›™è¶¨å‹¢
```

æ¯å€‹ Analyzer éƒ½æ¥æ”¶ã€Œæœ€è¿‘ N æœŸã€çš„è³‡æ–™ï¼Œå›å‚³é æ¸¬çµæœã€‚

### 8.2 BasicAnalyzer â€” åŸºæœ¬ç©æ³•

**è¼¸å…¥**ï¼šæœ€è¿‘ N æœŸçš„ `numbers_sorted`  
**è¼¸å‡º**ï¼šå‡ºç¾æ¬¡æ•¸æœ€å¤šçš„ Top 10 è™Ÿç¢¼

**å…©ç¨®æ¼”ç®—æ³•**ï¼š

| æ–¹æ³• | é‚è¼¯ | é©åˆå ´æ™¯ |
|------|------|----------|
| **Simple** (ç°¡å–®è¨ˆæ•¸) | æ¯å€‹è™Ÿç¢¼å‡ºç¾ä¸€æ¬¡ +1 | é•·æœŸè¶¨å‹¢ï¼ˆ100 æœŸï¼‰ |
| **Weighted** (åŠ æ¬Šè¨ˆæ•¸) | æœ€è¿‘ 10 æœŸ Ã—3.0ã€11-20 æœŸ Ã—2.0ã€21-30 æœŸ Ã—1.5ã€31+ æœŸ Ã—1.0 | çŸ­æœŸç†±è™Ÿï¼ˆ30 æœŸï¼‰ |

**åŠ æ¬Šçš„ç›´è¦º**ï¼šä½ æœƒæ›´åœ¨æ„ã€Œä¸Šä¸€å±€å¸¸å‡ºçš„è™Ÿç¢¼ã€é‚„æ˜¯ã€Œä¸‰å€‹æœˆå‰å¸¸å‡ºçš„ã€ï¼ŸåŠ æ¬Šå°±æ˜¯æŠŠã€Œè¶Šè¿‘æœŸçš„ã€çœ‹å¾—è¶Šé‡è¦ã€‚

### 8.3 SuperNumberAnalyzer â€” è¶…ç´šè™Ÿç¢¼

**è¼¸å…¥**ï¼šæœ€è¿‘ N æœŸçš„ `super_number`  
**è¼¸å‡º**ï¼šæœ€å¸¸ä½œç‚ºè¶…ç´šè™Ÿç¢¼çš„ Top 10 è™Ÿç¢¼

é‚è¼¯ç°¡å–®ï¼šç”¨ `Counter` æ•¸æ¯å€‹è™Ÿç¢¼å‡ºç¾å¹¾æ¬¡ï¼Œæ’åºå–å‰ 10ã€‚

### 8.4 HighLowAnalyzer / OddEvenAnalyzer â€” çŒœå¤§å° / çŒœå–®é›™

å…©è€…é‚è¼¯å°ç¨±ï¼Œå·®åœ¨æ¬„ä½åç¨±ã€‚ä»¥çŒœå¤§å°ç‚ºä¾‹ï¼š

**è¼¸å…¥**ï¼šæœ€è¿‘ N æœŸçš„ `high_low_result`  
**è¼¸å‡º**ï¼šé æ¸¬ã€Œå¤§ã€æˆ–ã€Œå°ã€+ ä¿¡å¿ƒåº¦ + ç†ç”±

**é æ¸¬ç­–ç•¥ï¼ˆå„ªå…ˆé †åºï¼‰**ï¼š

```
1ï¸âƒ£ é€£çºŒæ€§åè½‰ï¼ˆæœ€é«˜å„ªå…ˆï¼‰
   é€£çºŒ â‰¥ 3 æœŸåŒä¸€çµæœ â†’ é æ¸¬åå‘
   ä¾‹: é€£ 4 æœŸã€Œå¤§ã€â†’ é æ¸¬ã€Œå°ã€
   ä¿¡å¿ƒåº¦: 0.60 + (æœŸæ•¸-3) Ã— 0.05ï¼Œä¸Šé™ 0.80

2ï¸âƒ£ æ¯”ä¾‹å¤±è¡¡
   ä¸€æ–¹è¶…é 70% â†’ é æ¸¬å¦ä¸€æ–¹
   ä¾‹: 30 æœŸä¸­ 25 æœŸã€Œå¤§ã€(83%) â†’ é æ¸¬ã€Œå°ã€
   ä¿¡å¿ƒåº¦: 0.65

3ï¸âƒ£ å¤šæ•¸å„ªå…ˆï¼ˆä¿åº•ï¼‰
   å“ªé‚Šå¤šå°±çŒœå“ªé‚Š
   ä¿¡å¿ƒåº¦: 0.52ï¼ˆæ¥è¿‘éš¨æ©Ÿï¼‰
```

### 8.5 åˆ†æè§¸ç™¼æ™‚æ©Ÿ

```
æ¯æ¬¡çˆ¬èŸ²æˆåŠŸæŠ“åˆ°æ–°è³‡æ–™å¾Œï¼š
  â†’ å° period_range = [10, 20, 30, 50, 100] å„è·‘ä¸€æ¬¡åˆ†æ
  â†’ çµæœå­˜å…¥ predictions è¡¨
  â†’ ä½¿ç”¨è€…è®€å–æ™‚ç›´æ¥æŸ¥ predictionsï¼Œä¸å³æ™‚è¨ˆç®—
```

**ç‚ºä»€éº¼ä¸è®“ä½¿ç”¨è€…å³æ™‚è§¸ç™¼åˆ†æï¼Ÿ**
- 100 å€‹ä½¿ç”¨è€…åŒæ™‚è«‹æ±‚ â†’ 100 æ¬¡ DB æŸ¥è©¢ + è¨ˆç®— â†’ å¾Œç«¯å£“åŠ›å¤§
- é è¨ˆç®— + å¿«å– = ä½¿ç”¨è€…åªè®€ä¸ç®— â†’ å¾Œç«¯å¹¾ä¹é›¶å£“åŠ›

---

## 9. å¾Œç«¯ API è¨­è¨ˆ

### 9.1 API ç¸½è¦½

| Method | Path | èªªæ˜ | å›å‚³ |
|--------|------|------|------|
| GET | `/` | å¥åº·æª¢æŸ¥ | `{"message": "BINGO åˆ†æ API"}` |
| GET | `/health` | å¥åº·æª¢æŸ¥ | `{"status": "healthy"}` |
| GET | `/api/status/last-updated` | æœ€å¾Œæ›´æ–°æ™‚é–“ï¼ˆå‰ç«¯ polling ç”¨ï¼‰ | `{"last_updated": "..."}` |
| GET | `/api/draws/latest?limit=20` | æœ€æ–°é–‹çç´€éŒ„ | é–‹çåˆ—è¡¨ |
| GET | `/api/draws/{draw_term}` | ç‰¹å®šæœŸè™Ÿ | å–®æœŸè³‡æ–™ |
| GET | `/api/predictions/basic?period_range=30&top_n=10` | åŸºæœ¬ç©æ³•é æ¸¬ | Top N è™Ÿç¢¼ |
| GET | `/api/predictions/basic/batch?period_ranges=10,20,30,50,100` | æ‰¹æ¬¡å¤šæœŸæ•¸åˆ†æ | å¤šçµ„çµæœ |
| GET | `/api/predictions/super-number?period_range=30` | è¶…ç´šè™Ÿç¢¼é æ¸¬ | Top N è™Ÿç¢¼ |
| GET | `/api/predictions/high-low?period_range=30` | çŒœå¤§å°é æ¸¬ | é æ¸¬çµæœ |
| GET | `/api/predictions/odd-even?period_range=30` | çŒœå–®é›™é æ¸¬ | é æ¸¬çµæœ |
| GET | `/api/predictions/all?period_range=30` | å…¨éƒ¨é æ¸¬ï¼ˆä¸€æ¬¡å–ï¼‰ | å››ç¨®ç©æ³•çµæœ |

### 9.2 æ ¸å¿ƒ Response ç¯„ä¾‹

**GET /api/predictions/all?period_range=30**

```json
{
  "basic": {
    "period_range": 30,
    "method": "weighted",
    "predictions": [
      {"number": "42", "score": 45.5, "rank": 1},
      {"number": "17", "score": 42.0, "rank": 2}
    ]
  },
  "super_number": {
    "period_range": 30,
    "predictions": [
      {"number": "44", "frequency": 3, "rank": 1}
    ]
  },
  "high_low": {
    "prediction": "å¤§",
    "confidence": 0.65,
    "reason": "é€£çºŒ 3 æœŸé–‹å°ï¼Œé æ¸¬åè½‰",
    "statistics": {
      "high_count": 18,
      "low_count": 12,
      "high_pct": 60.0,
      "current_streak": {"type": "å°", "count": 3}
    }
  },
  "odd_even": {
    "prediction": "å–®",
    "confidence": 0.52,
    "reason": "æ ¹æ“šæ­·å²å¤šæ•¸",
    "statistics": { ... }
  }
}
```

### 9.3 CORS è¨­å®š

å…è¨±å‰ç«¯é–‹ç™¼ä¼ºæœå™¨å­˜å–ï¼š

```
allow_origins: ["http://localhost:5173", "http://localhost:3000", "https://your-domain.com"]
```

---

## 10. å‰ç«¯è¨­è¨ˆ

### 10.1 UI é¢¨æ ¼ï¼šFlat Design

- **æ‰å¹³åŒ–**ï¼šç„¡é™°å½±ã€ç„¡æ¼¸å±¤ã€ç„¡ç«‹é«”æ•ˆæœ
- **è‰²å¡Š**: ç”¨é®®æ˜è‰²å¡Šå€åˆ†ä¸åŒå€åŸŸ
- **å­—é«”**ï¼šç°¡æ½”sans-serifï¼ˆNoto Sans TC / Interï¼‰
- **é–“è·**ï¼šå……è¶³çš„ç•™ç™½

### 10.2 é é¢çµæ§‹

```
App
 â”œâ”€â”€ Navbarï¼ˆå°èˆªåˆ—ï¼‰
 â”‚     â”œâ”€â”€ Dashboard
 â”‚     â”œâ”€â”€ åŸºæœ¬ç©æ³•
 â”‚     â”œâ”€â”€ è¶…ç´šè™Ÿç¢¼
 â”‚     â””â”€â”€ çŒœå¤§å° / çŒœå–®é›™
 â”‚
 â”œâ”€â”€ Dashboardï¼ˆé¦–é  / å„€è¡¨æ¿ï¼‰
 â”‚     â”œâ”€â”€ PeriodSelectorï¼ˆé¸æ“‡åˆ†ææœŸæ•¸: 10/20/30/50/100ï¼‰
 â”‚     â”œâ”€â”€ PredictionCard Ã— 4ï¼ˆå››ç¨®ç©æ³•å¿«é€Ÿé è¦½ï¼‰
 â”‚     â””â”€â”€ HistoryTableï¼ˆæœ€è¿‘ 10 æœŸé–‹ççµæœï¼‰
 â”‚
 â”œâ”€â”€ BasicAnalysisï¼ˆåŸºæœ¬ç©æ³•è©³ç´°é ï¼‰
 â”‚     â”œâ”€â”€ PeriodSelector
 â”‚     â”œâ”€â”€ Top 10 è™Ÿç¢¼æ¸…å–®ï¼ˆæœ‰æ’åé‡‘éŠ€éŠ…é«˜äº®ï¼‰
 â”‚     â””â”€â”€ FrequencyChartï¼ˆ80 å€‹è™Ÿç¢¼çš„é »ç‡é•·æ¢åœ– â€” Chart.jsï¼‰
 â”‚
 â”œâ”€â”€ SuperNumberï¼ˆè¶…ç´šè™Ÿç¢¼è©³ç´°é ï¼‰
 â”‚     â”œâ”€â”€ PeriodSelector
 â”‚     â”œâ”€â”€ Top 10 è¶…ç´šè™Ÿç¢¼æ¸…å–®
 â”‚     â””â”€â”€ FrequencyChart
 â”‚
 â””â”€â”€ HighLowOddEvenï¼ˆçŒœå¤§å° / çŒœå–®é›™ åˆä½µé ï¼‰
       â”œâ”€â”€ PeriodSelector
       â”œâ”€â”€ çŒœå¤§å°å¡ç‰‡ï¼ˆé æ¸¬çµæœ + ä¿¡å¿ƒåº¦ + åœ“é¤…åœ–ï¼‰
       â””â”€â”€ çŒœå–®é›™å¡ç‰‡ï¼ˆé æ¸¬çµæœ + ä¿¡å¿ƒåº¦ + åœ“é¤…åœ–ï¼‰
```

### 10.3 å‰ç«¯å°ˆæ¡ˆçµæ§‹

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js                  å…¥å£
â”‚   â”œâ”€â”€ App.vue                  æ ¹çµ„ä»¶
â”‚   â”œâ”€â”€ router/index.js          Vue Router è·¯ç”±è¨­å®š
â”‚   â”œâ”€â”€ stores/prediction.js     Pinia ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ services/api.js          Axios API å°è£
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ Dashboard.vue        å„€è¡¨æ¿
â”‚   â”‚   â”œâ”€â”€ BasicAnalysis.vue    åŸºæœ¬ç©æ³•
â”‚   â”‚   â”œâ”€â”€ SuperNumber.vue      è¶…ç´šè™Ÿç¢¼
â”‚   â”‚   â””â”€â”€ HighLowOddEven.vue   çŒœå¤§å° / çŒœå–®é›™
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ PredictionCard.vue   é æ¸¬çµæœå¡ç‰‡
â”‚       â”œâ”€â”€ FrequencyChart.vue   é »ç‡åœ–è¡¨ (Chart.js)
â”‚       â”œâ”€â”€ HistoryTable.vue     æ­·å²é–‹çè¡¨æ ¼
â”‚       â””â”€â”€ PeriodSelector.vue   æœŸæ•¸é¸æ“‡å™¨
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.js
```

### 10.4 ç‹€æ…‹ç®¡ç†æµç¨‹ (Pinia)

```
ä½¿ç”¨è€…é¸æ“‡ã€Œ30 æœŸã€
    â”‚
    â–¼
PeriodSelector â†’ store.setPeriodRange(30)
    â”‚
    â–¼
store.fetchAll() â†’ GET /api/predictions/all?period_range=30
    â”‚
    â–¼
store.basic / store.superNumber / store.highLow / store.oddEven æ›´æ–°
    â”‚
    â–¼
å„ View çµ„ä»¶ç›£è½ store â†’ è‡ªå‹•é‡æ–°æ¸²æŸ“
```

### 10.5 è‡ªå‹•åˆ·æ–°æ©Ÿåˆ¶

```
é é¢è¼‰å…¥ â†’ fetchAll() â†’ é–‹å§‹ polling
    â”‚
    â”œâ”€â”€ æ¯ 30 ç§’ GET /api/status/last-updated
    â”‚     â”‚
    â”‚     â”œâ”€â”€ timestamp æ²’è®Š â†’ ä¸åšäº‹
    â”‚     â””â”€â”€ timestamp è®Šäº† â†’ fetchAll() â†’ æ›´æ–°ç•«é¢
    â”‚
    â””â”€â”€ é é¢é—œé–‰ â†’ åœæ­¢ polling
```

### 10.6 åœ–è¡¨è¨­è¨ˆ

| åœ–è¡¨ | é¡å‹ | å‡½å¼åº« | ç”¨é€” |
|------|------|--------|------|
| è™Ÿç¢¼é »ç‡åœ– | é•·æ¢åœ– (Bar) | Chart.js | é¡¯ç¤º 80 å€‹è™Ÿç¢¼å„å‡ºç¾å¹¾æ¬¡ |
| å¤§å°æ¯”ä¾‹åœ– | åœ“é¤…åœ– (Doughnut) | Chart.js | å¤§ vs å° vs å¹³æ‰‹çš„æ¯”ä¾‹ |
| å–®é›™æ¯”ä¾‹åœ– | åœ“é¤…åœ– (Doughnut) | Chart.js | å–® vs é›™ vs å¹³æ‰‹çš„æ¯”ä¾‹ |

---

## 11. æ•ˆèƒ½èˆ‡æ“´å±•æ€§è¨­è¨ˆ

### 11.1 100 äººåŒæ™‚ä½¿ç”¨çš„è¨­è¨ˆè€ƒé‡

æ ¸å¿ƒç­–ç•¥ï¼š**ä½¿ç”¨è€…æ°¸é åªè®€é è¨ˆç®—å¥½çš„çµæœï¼Œä¸è§¸ç™¼å³æ™‚è¨ˆç®—ã€‚**

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
100 ä½ä½¿ç”¨è€… â”€â”€â†’    â”‚  è®€å– predictions è¡¨ (SELECT)   â”‚  â† è¶…å¿«
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â–²
                                  â”‚ é è¨ˆç®—
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
çˆ¬èŸ² (1 instance) â”€â”€â”‚  å¯«å…¥ + åˆ†æ (æ¯ 6 åˆ†é˜ä¸€æ¬¡)    â”‚  â† ç¨ç«‹é‹ä½œ
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.2 æ•ˆèƒ½ç“¶é ¸åˆ†æ

| å¯èƒ½ç“¶é ¸ | åš´é‡ç¨‹åº¦ | è§£æ³• |
|---------|---------|------|
| DB é€£ç·šæ•¸ | â­ ä½ | SQLAlchemy connection poolï¼ˆé è¨­ 5 æ¢ï¼Œå¤ ç”¨ï¼‰ |
| å³æ™‚è¨ˆç®—å£“åŠ› | â­â­ ä¸­ | ç”¨é è¨ˆç®—è§£ï¼Œä¸å³æ™‚ç®— |
| API æ‰“å¤ªå¿« | â­ ä½ | 6 åˆ†é˜ä¸€æ¬¡ï¼Œå°å®˜æ–¹ API å¾ˆå‹å–„ |
| å‰ç«¯ bundle å¤ªå¤§ | â­ ä½ | Vue + Chart.js < 500KB gzipped |
| è³‡æ–™é‡å¢é•· | â­ ä½ | æ¯å¤© 288 æœŸ Ã— 365 å¤© = ~10 è¬ç­†/å¹´ï¼Œè¶…å° |

### 11.3 å¦‚æœæœªä¾†è¦æ“´å±•

- **200+ äºº**ï¼šåŠ  Redis å¿«å–åˆ†æçµæœï¼ˆä¸å­˜ predictions è¡¨äº†ï¼‰
- **500+ äºº**ï¼šGunicorn å¤š worker + Nginx è² è¼‰å‡è¡¡
- **1000+ äºº**ï¼šå‰ç«¯ä¸Š CDNï¼Œå¾Œç«¯å¤šå¯¦ä¾‹ + å¤–éƒ¨ PostgreSQL

---

## 12. éƒ¨ç½²æ¶æ§‹

### 12.1 Docker Compose çµæ§‹

```yaml
services:
  backend:
    build: ./backend
    ports: ["8000:8000"]
    environment:
      DATABASE_URL: postgresql://bingo:password@db:5432/bingo
    depends_on: [db]

  frontend:
    build: ./frontend
    ports: ["80:80"]
    # Nginx æœå‹™éœæ…‹æª”æ¡ˆ + åå‘ä»£ç† /api â†’ backend:8000

  db:
    image: postgres:16
    volumes: ["pgdata:/var/lib/postgresql/data"]
    environment:
      POSTGRES_DB: bingo
      POSTGRES_USER: bingo
      POSTGRES_PASSWORD: password

volumes:
  pgdata:
```

### 12.2 éƒ¨ç½²æµç¨‹

```
æœ¬åœ°é–‹ç™¼ â†’ git push â†’ CI/CD (GitHub Actions) â†’ Docker build â†’ éƒ¨ç½²åˆ° Cloud
```

å…·é«” Cloud é¸é …ï¼š
- **fly.io**ï¼šå…è²»é¡åº¦ï¼Œé©åˆ side project
- **Railway**ï¼šç°¡å–®ï¼Œç›´æ¥å¾ GitHub deploy
- **è‡ªæ¶ VPS**ï¼šå®Œå…¨æ§åˆ¶ï¼Œä½†è¦è‡ªå·±ç¶­è­·

---

## 13. é–‹ç™¼éšæ®µè¦åŠƒ

### Phase 1ï¼šå¾Œç«¯æ ¸å¿ƒ (1-2 é€±)

```
[ ] å°ˆæ¡ˆåˆå§‹åŒ– (FastAPI + SQLAlchemy + Pydantic)
[ ] è³‡æ–™åº« model å®šç¾©
[ ] çˆ¬èŸ²å¯¦ä½œ + é©—è­‰é‚è¼¯
[ ] æ‰‹å‹•è·‘çˆ¬èŸ²ï¼Œç¢ºèªè³‡æ–™èƒ½æ­£ç¢ºå­˜å…¥
[ ] å››å€‹ Analyzer å¯¦ä½œ
[ ] API è·¯ç”±å¯¦ä½œ
[ ] æ’ç¨‹å™¨è¨­å®š (APScheduler)
```

### Phase 2ï¼šå‰ç«¯ UI (1-2 é€±)

```
[ ] Vue 3 + Vite å°ˆæ¡ˆåˆå§‹åŒ–
[ ] API æœå‹™å°è£ (Axios)
[ ] Pinia store è¨­å®š + polling æ©Ÿåˆ¶ (/api/status/last-updated)
[ ] Dashboard é é¢
[ ] åŸºæœ¬ç©æ³•è©³ç´°é  + Chart.js é•·æ¢åœ–
[ ] è¶…ç´šè™Ÿç¢¼è©³ç´°é 
[ ] çŒœå¤§å° / çŒœå–®é›™é  + åœ“é¤…åœ–
[ ] Flat Design æ¨£å¼èª¿æ•´
```

### Phase 3ï¼šæ•´åˆèˆ‡éƒ¨ç½² (1 é€±)

```
[ ] å‰å¾Œç«¯è¯èª¿
[ ] Docker Compose è¨­å®š
[ ] PostgreSQL åˆ‡æ›æ¸¬è©¦
[ ] éƒ¨ç½²åˆ° Cloud
[ ] å®Œæ•´æ¸¬è©¦
```

### Phase 4ï¼šå„ªåŒ– (å¯é¸)

```
[ ] åŠ å…¥å¿«å–å±¤ (Redis)
[ ] æ›´ç²¾ç¢ºçš„ drawTerm æ™‚é–“è§£æ
[ ] æ›´å¤šåˆ†ææ¼”ç®—æ³•ï¼ˆç§»å‹•å¹³å‡ã€éºæ¼å¤©æ•¸ç­‰ï¼‰
[ ] SSE (Server-Sent Events) å–ä»£ pollingï¼ˆæ›´å³æ™‚ã€æ›´çœè³‡æºï¼‰
```

---

## é™„éŒ„

### A. å¾Œç«¯å°ˆæ¡ˆç›®éŒ„çµæ§‹

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py               FastAPI å…¥å£ + lifespan
â”‚   â”œâ”€â”€ config.py             ç’°å¢ƒè®Šæ•¸è¨­å®š (Pydantic Settings)
â”‚   â”œâ”€â”€ database.py           SQLAlchemy engine + session
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ draw_result.py    DrawResult ORM model
â”‚   â”‚   â”œâ”€â”€ prediction.py     Prediction ORM model
â”‚   â”‚   â””â”€â”€ crawler_log.py    CrawlerLog ORM model
â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â”œâ”€â”€ draw.py           Pydantic response schema
â”‚   â”‚   â””â”€â”€ prediction.py     Pydantic response schema
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ draws.py          /api/draws/* è·¯ç”±
â”‚       â””â”€â”€ predictions.py    /api/predictions/* è·¯ç”±
â”œâ”€â”€ analysis/
â”‚   â”œâ”€â”€ engine.py             çµ±ä¸€å…¥å£
â”‚   â”œâ”€â”€ basic_analyzer.py
â”‚   â”œâ”€â”€ super_number_analyzer.py
â”‚   â”œâ”€â”€ high_low_analyzer.py
â”‚   â””â”€â”€ odd_even_analyzer.py
â”œâ”€â”€ crawler/
â”‚   â””â”€â”€ bingo_crawler.py
â”œâ”€â”€ scheduler/
â”‚   â””â”€â”€ tasks.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ Dockerfile
â””â”€â”€ .env
```
